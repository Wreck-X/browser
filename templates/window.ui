<?xml version="1.0" encoding="UTF-8" ?>
<interface>
    <template class="tilde" parent="GtkApplicationWindow">
        <property name="title">tilde</property>
        <property name="default-width">1200</property>
        <property name="default-height">800</property>

        <child>
            <object class="GtkOverlay" id="main_overlay">

                <!-- 1. The Web Content -->
                <child>
                    <object class="GtkNotebook" id="notebook">
                        <property name="show-tabs">false</property>
                        <property name="show-border">false</property>
                    </object>
                </child>

                <!-- 2. Command Palette (Top Overlay) -->
                <child type="overlay">
                    <object class="GtkBox" id="command_palette_container">
                        <property name="visible">false</property>
                        <property name="orientation">vertical</property>
                        <property name="halign">center</property>
                        <property name="valign">start</property>
                        <property name="width-request">600</property>
                        <property name="spacing">0</property>

                        <!-- Add styling class -->
                        <style>
                            <class name="command-palette" />
                        </style>

                        <!-- Search Input -->
                        <child>
                            <object class="GtkSearchEntry" id="command_entry">
                                <property
                                    name="placeholder-text"
                                >Where to?</property>
                                <property name="hexpand">true</property>
                                <style>
                                    <class name="search-entry" />
                                </style>
                            </object>
                        </child>

                        <!-- Results -->
                        <child>
                            <object
                                class="GtkScrolledWindow"
                                id="results_scroll"
                            >
                                <property
                                    name="max-content-height"
                                >400</property>
                                <property
                                    name="propagate-natural-height"
                                >true</property>
                                <property name="vexpand">true</property>
                                <property
                                    name="hscrollbar-policy"
                                >never</property>

                                <child>
                                    <object
                                        class="GtkListBox"
                                        id="results_list"
                                    >
                                        <property
                                            name="selection-mode"
                                        >single</property>
                                        <property
                                            name="activate-on-single-click"
                                        >true</property>
                                        <style>
                                            <class name="results-list" />
                                        </style>
                                    </object>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>

                <!-- 3. The Dock (Bottom Overlay) -->
                <child type="overlay">
                    <object class="GtkRevealer" id="dock_revealer">
                        <property name="transition-type">slide-up</property>
                        <property name="transition-duration">250</property>
                        <property name="reveal-child">false</property>
                        <property
                            name="halign"
                        >center</property> <!-- Center the dock itself -->
                        <property name="valign">end</property>

                        <child>
                            <object class="GtkBox">
                                <property name="orientation">vertical</property>
                                <!-- Container to add padding from bottom edge -->
                                <style>
                                    <class name="dock-container" />
                                </style>

                                <child>
                                    <!-- Use CenterBox for perfect alignment -->
                                    <object class="GtkCenterBox">
                                        <property
                                            name="height-request"
                                        >42</property>
                                        <style>
                                            <class name="dock" />
                                        </style>

                                        <!-- Left: Profile info -->
                                        <child type="start">
                                            <object class="GtkBox">
                                                <property
                                                    name="spacing"
                                                >10</property>
                                                <child>
                                                    <object
                                                        class="GtkLabel"
                                                        id="profile_label"
                                                    >
                                                        <property
                                                            name="label"
                                                        >default</property>
                                                        <style>
                                                            <class
                                                                name="dock-label"
                                                            />
                                                        </style>
                                                    </object>
                                                </child>
                                                <child>
                                                    <object class="GtkLabel">
                                                        <property
                                                            name="label"
                                                        >|</property>
                                                        <style>
                                                            <class
                                                                name="dock-separator"
                                                            />
                                                        </style>
                                                    </object>
                                                </child>
                                            </object>
                                        </child>

                                        <!-- Center: URI (The most important part) -->
                                        <child type="center">
                                            <object
                                                class="GtkLabel"
                                                id="uri_label"
                                            >
                                                <property
                                                    name="label"
                                                >Loading...</property>
                                                <property
                                                    name="ellipsize"
                                                >end</property>
                                                <property
                                                    name="max-width-chars"
                                                >50</property>
                                                <style>
                                                    <class name="dock-label" />
                                                    <class name="primary" />
                                                </style>
                                            </object>
                                        </child>

                                        <!-- Right: Tab Count -->
                                        <child type="end">
                                            <object class="GtkBox">
                                                <property
                                                    name="halign"
                                                >end</property>
                                                <child>
                                                    <object class="GtkLabel">
                                                        <property
                                                            name="label"
                                                        >|</property>
                                                        <style>
                                                            <class
                                                                name="dock-separator"
                                                            />
                                                        </style>
                                                    </object>
                                                </child>
                                                <child>
                                                    <object
                                                        class="GtkLabel"
                                                        id="tab_label"
                                                    >
                                                        <property
                                                            name="label"
                                                        >1 tab</property>
                                                        <style>
                                                            <class
                                                                name="dock-label"
                                                            />
                                                        </style>
                                                    </object>
                                                </child>
                                            </object>
                                        </child>

                                    </object>
                                </child>
                            </object>
                        </child>
                    </object>
                </child>

            </object>
        </child>
    </template>
</interface>
